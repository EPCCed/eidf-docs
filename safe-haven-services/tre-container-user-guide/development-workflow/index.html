
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.eidf.ac.uk/safe-haven-services/tre-container-user-guide/development-workflow/">
      
      
        <link rel="prev" href="../introduction/">
      
      
        <link rel="next" href="../workflow-examples/">
      
      
      <link rel="icon" href="../../../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Development Workflow - EIDF User Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/eidf.css">
    
      <link rel="stylesheet" href="../../../stylesheets/access.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#development-workflow" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
<div class="announce">
<p class="bold">
    Advanced Computing Facility (ACF) Power Outage:
    Friday 29th August - Monday 15th September
</p>
<p>
    Due to a significant Health and Safety risk, associated with our power supply to the site, that requires action at the ACF, there will be a full power outage to the site from Friday 29th August - Monday 15th September.  Specialised external contractors will be working on a 24/7 basis for the outage period replacing switchgear. The EIDF Services are hosted at the ACF.
</p>
<p>
    All EIDF Services will be completely powered off for the duration of this period.
    Updates will be provided during the outage at <a href="https://docs.eidf.ac.uk/status/">https://docs.eidf.ac.uk/status/</a>.
</p>
</div>

          </div>
          
        </aside>
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="EIDF User Documentation" class="md-header__button md-logo" aria-label="EIDF User Documentation" data-md-component="logo">
      
  <img src="../../../images/EIDF_rgb.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EIDF User Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Development Workflow
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/EPCCed/eidf-docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    EPCCed/eidf-docs.git
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="EIDF User Documentation" class="md-nav__button md-logo" aria-label="EIDF User Documentation" data-md-component="logo">
      
  <img src="../../../images/EIDF_rgb.png" alt="logo">

    </a>
    EIDF User Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/EPCCed/eidf-docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    EPCCed/eidf-docs.git
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../status/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Service Status
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Documentation overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    About EIDF
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            About EIDF
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/acknowledgements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Acknowledgements
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/contacts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contact
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Service Access
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Service Access
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../access/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Web and SSH
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../access/project/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EIDF Web Portal
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../access/virtualmachines-vdi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Virtual Desktop Interface
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Storage in the EIDF
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Storage in the EIDF
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../storage/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../storage/faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQs
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Computing Services
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Computing Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" >
        
          
          <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Virtual Desktops
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            Virtual Desktops
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/virtualmachines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/virtualmachines/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QuickStart
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/virtualmachines/docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Managing VMs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../access/virtualmachines-vdi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Virtual Desktop Interface
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/virtualmachines/sharedfs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Shared Filesystem
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../access/ssh/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SSH Access to VMs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/virtualmachines/flavours/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VM Flavours
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/virtualmachines/policies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Policies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/virtualmachines/rdp-tunnelling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RDP tunnelling over SSH
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Ultra2
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Ultra2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/ultra2/access/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/ultra2/connect/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connect
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/ultra2/run/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running codes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cerebras
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            Cerebras
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/cerebras/access/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/cerebras/connect/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connect
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/cerebras/run/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running codes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    GPU Service
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            GPU Service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/gpuservice/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/gpuservice/policies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Policies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/gpuservice/kueue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kueue
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/gpuservice/shared-cephfs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Shared Filesystem (CephFS) PVCs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4_5" >
        
          
          <label class="md-nav__link" for="__nav_6_4_5" id="__nav_6_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4_5">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/gpuservice/training/L1_getting_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/gpuservice/training/L2_requesting_persistent_volumes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Persistent Volumes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/gpuservice/training/L3_running_a_pytorch_task/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running a Pytorch Pod
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/gpuservice/training/L4_template_workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Template K8s Workflow
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/gpuservice/faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GPU Service FAQ
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_5" >
        
          
          <label class="md-nav__link" for="__nav_6_5" id="__nav_6_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Graphcore Bow Pod64
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_5">
            <span class="md-nav__icon md-icon"></span>
            Graphcore Bow Pod64
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/graphcore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_5_2" >
        
          
          <label class="md-nav__link" for="__nav_6_5_2" id="__nav_6_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tutorial
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_5_2">
            <span class="md-nav__icon md-icon"></span>
            Tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/graphcore/training/L1_getting_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/graphcore/training/L2_multiple_IPU/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multi-IPU Jobs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/graphcore/training/L3_profiling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Profiling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/graphcore/training/L4_other_frameworks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Other Frameworks
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/graphcore/faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Graphcore FAQ
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_6" >
        
          
          <label class="md-nav__link" for="__nav_6_6" id="__nav_6_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Notebooks
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_6">
            <span class="md-nav__icon md-icon"></span>
            Notebooks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/jhub/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/jhub/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quickstart
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Data Services
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Data Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_1" >
        
          
          <label class="md-nav__link" for="__nav_7_1" id="__nav_7_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    S3
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_1">
            <span class="md-nav__icon md-icon"></span>
            S3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/s3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/s3/manage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Manage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/s3/tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Data Publishing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            Data Publishing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/datapublishing/service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/datapublishing/catalogue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Your Data Catalogue entry
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3" >
        
          
          <label class="md-nav__link" for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Data Catalogue
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3">
            <span class="md-nav__icon md-icon"></span>
            Data Catalogue
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/datacatalogue/metadata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Metadata information
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4" >
        
          
          <label class="md-nav__link" for="__nav_7_4" id="__nav_7_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Code Collaboration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4">
            <span class="md-nav__icon md-icon"></span>
            Code Collaboration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../services/gitlab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gitlab service
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Safe Haven Services
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Safe Haven Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../network-access-controls/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Network Access Controls
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../safe-haven-access/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Safe Haven Access
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual-desktop-connections/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Virtual Desktop Connections
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using-the-hpc-cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using the HPC Cluster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_6" >
        
          
          <label class="md-nav__link" for="__nav_8_6" id="__nav_8_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Superdome Flex Tutorial
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_6">
            <span class="md-nav__icon md-icon"></span>
            Superdome Flex Tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../superdome-flex-tutorial/L1_Accessing_the_SDF_Inside_the_EPCC_TRE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accessing the SDF Inside the EPCC TRE
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../superdome-flex-tutorial/L2_running_R_Python_analysis_scripts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running R/Python Scripts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../superdome-flex-tutorial/L3_submitting_scripts_to_slurm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Submitting Scripts to Slurm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../superdome-flex-tutorial/L4_parallelised_python_analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parallelised Python Analysis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../superdome-flex-tutorial/L5_parallelised_r_analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parallelised R Analysis
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_7" checked>
        
          
          <label class="md-nav__link" for="__nav_8_7" id="__nav_8_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    TRE Container User Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8_7">
            <span class="md-nav__icon md-icon"></span>
            TRE Container User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Development Workflow
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Development Workflow
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#step-1-writing-a-dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1. Writing a Dockerfile
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 1. Writing a Dockerfile">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-tre-specific-advice" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 TRE-specific advice
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-general-recommendations" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 General recommendations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-build-test-locally-and-push-to-registry" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2. Build, test locally and push to registry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 2. Build, test locally and push to registry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-build-and-test-the-container-locally" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Build and test the container locally
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-automating-dockerfile-validation" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 Automating Dockerfile validation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-push-to-ghcr" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 Push to GHCR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-optional-build-and-upload-automation-using-github-actions" class="md-nav__link">
    <span class="md-ellipsis">
      2.5 Optional - Build and upload automation using GitHub Actions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.5 Optional - Build and upload automation using GitHub Actions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-in-ci" class="md-nav__link">
    <span class="md-ellipsis">
      Building in CI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publishing-in-ci" class="md-nav__link">
    <span class="md-ellipsis">
      Publishing in CI
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-test-in-ces-test-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3. Test in CES test environment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 3. Test in CES test environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-accessing-test-environment" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 Accessing test environment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-pull-and-run" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 Pull and run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-pull-and-run-container-inside-the-tre" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4. Pull and run container inside the TRE
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workflow-examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Workflow Examples
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../container-examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Container Examples
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../known-issues/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EIDF Known Issues
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EIDF Frequently Asked Questions
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorial-videos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EIDF Tutorial Videos
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#step-1-writing-a-dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1. Writing a Dockerfile
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 1. Writing a Dockerfile">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-tre-specific-advice" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 TRE-specific advice
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-general-recommendations" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 General recommendations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-build-test-locally-and-push-to-registry" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2. Build, test locally and push to registry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 2. Build, test locally and push to registry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-build-and-test-the-container-locally" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Build and test the container locally
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-automating-dockerfile-validation" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 Automating Dockerfile validation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-push-to-ghcr" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 Push to GHCR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-optional-build-and-upload-automation-using-github-actions" class="md-nav__link">
    <span class="md-ellipsis">
      2.5 Optional - Build and upload automation using GitHub Actions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.5 Optional - Build and upload automation using GitHub Actions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-in-ci" class="md-nav__link">
    <span class="md-ellipsis">
      Building in CI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publishing-in-ci" class="md-nav__link">
    <span class="md-ellipsis">
      Publishing in CI
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-test-in-ces-test-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3. Test in CES test environment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 3. Test in CES test environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-accessing-test-environment" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 Accessing test environment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-pull-and-run" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 Pull and run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-pull-and-run-container-inside-the-tre" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4. Pull and run container inside the TRE
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="development-workflow">Development Workflow</h1>
<p>This document describes in detail the <a href="../introduction/#overview">four steps</a> recommended for the development of containers for TRE use.</p>
<h2 id="step-1-writing-a-dockerfile">Step 1. Writing a <code>Dockerfile</code></h2>
<h3 id="11-tre-specific-advice">1.1 TRE-specific advice</h3>
<ul>
<li>
<p>Declare TRE specific directories using the line <code>RUN mkdir /safe_data /safe_outputs /scratch</code> in your Dockerfile. While the CES tools automatically generate these directories within the container, explicitly creating them
   enhances transparency and helps others more easily understand the container’s structure and operation.
   Note that files should not be added to these directories through the Dockerfile prior to mounting, as they would be overwritten during the mounting process. The directories will be fully accessible within the container during run time.</p>
</li>
<li>
<p>Start with a well-known application base container on a public registry.
   Projects should add a minimum of additional project software and packages
   so that the container is clearly built for a specific purpose. Avoid
   patching and preserve the original container setup wherever possible.
   Complex containers, particularly interactive ones, have been carefully
   designed by competent developers to meet high security and usability
   standards. Modifying these without the required knowledge might introduce
   unwanted risks and side effects.</p>
</li>
<li>
<p>Do not copy data files into the image. As a general rule, images should only contain software and configuration files. Any data files required will be presented to the container at runtime (e.g. via the <code>/safe_data</code> mount) and should not be copied into the container during the build.</p>
</li>
<li>
<p>Add all the additional content (code files, libraries, packages, data, and licences) needed for your analysis work to your Dockerfile. Since the TRE VMs do not have internet access, all necessary code, dependencies, and resources must be pre-packaged within the container to ensure it runs successfully.</p>
</li>
<li>
<p>Apply the principle of least privilege, that is select a non-privileged user inside the container whenever possible.</p>
</li>
</ul>
<!--- Some containers are meant to be started by the root user, for example Rocker. In this case, please use Podman and avoid Kubernetes. In our CES Kubernetes setup, security policies and configurations enforce a non-root execution model. This means containers are explicitly prohibited from running as the root user.-->

<h3 id="12-general-recommendations">1.2 General recommendations</h3>
<p>It is highly recommended that users follow these Dockerfile best practice guidelines:</p>
<ul>
<li>Use fully-qualified and pinned images in all <code>FROM</code> statements. Images can be hosted on multiple repositories, and image tags are mutable. The only way to ensure reproducible builds is by pinning images by their full signature. The signature of an image can be viewed with <code>docker inspect --format='{{index .RepoDigests 0}}' &lt;image&gt;</code>. The image repository is usually <code>docker.io</code> or <code>ghcr.io</code>.</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c"># Incorrect</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">nvidia/cuda:latest</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">docker.io/nvidia/cuda:12.4.1-cudnn-devel-ubuntu22.04</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">docker.io/nvidia/cuda:latest</span>

<span class="c"># Correct</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">docker.io/nvidia/cuda:12.4.1-cudnn-devel-ubuntu22.04@sha256:622e78a1d02c0f90ed900e3985d6c975d8e2dc9ee5e61643aed587dcf9129f42</span>
</code></pre></div>
<ul>
<li>Group consecutive and related commands into a single <code>RUN</code> statement. Each <code>RUN</code> statement causes a new layer to be created in the image. By grouping <code>RUN</code> statements together, and deleting temporary files, the final image image size can be greatly reduced.</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c"># Incorrect</span>
<span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>update
<span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>curl
<span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>git

<span class="c"># Correct</span>
<span class="c"># - Single RUN statement with commands broken over multiple lines</span>
<span class="c"># - Temporary apt files are deleted and not stored in the final image</span>
<span class="k">RUN</span><span class="w"> </span>:<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt-get<span class="w"> </span>update<span class="w"> </span>-qq<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">DEBIAN_FRONTEND</span><span class="o">=</span>noninteractive<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span><span class="se">\</span>
<span class="w">         </span>-qq<span class="w"> </span>-y<span class="w"> </span>--no-install-recommends<span class="w"> </span><span class="se">\</span>
<span class="w">         </span>curl<span class="w"> </span><span class="se">\</span>
<span class="w">         </span>git<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt-get<span class="w"> </span>clean<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/var/lib/apt/lists/*<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span>:
</code></pre></div>
<ul>
<li>Use <code>COPY</code> instead of <code>ADD</code>. Compared to the <code>COPY</code> command, <code>ADD</code> supports much more functionality such as unpacking archives and downloading from URLs. While this may seem convenient, using <code>ADD</code> may result in much larger images with layers which are unnecessary. In the following example, using COPY after unpacking locally makes the image more efficient:</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c"># Incorrect</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">python:3.9-slim</span>
<span class="c"># Unpack a tar archive</span>
<span class="k">ADD</span><span class="w"> </span>my_project.tar.gz<span class="w"> </span>/target-dir/
<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;python&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;/target-dir/main.py&quot;</span><span class="p">]</span>

<span class="c"># Correct</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">python:3.9-slim</span>
<span class="c"># Unpack my_project.tar.gz locally first, then copy</span>
<span class="k">COPY</span><span class="w"> </span>my_project/<span class="w"> </span>/target-dir/
<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;python&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;/target-dir/main.py&quot;</span><span class="p">]</span>
</code></pre></div>
<ul>
<li>Use multi-stage builds where appropriate. Separating build/compilation steps into a separate stage helps to minimise the content of the final image and reduce the overall size.</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="k">FROM</span><span class="w"> </span><span class="s">some-image</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">builder</span>
<span class="k">RUN</span><span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>build-dependencies
<span class="k">COPY</span><span class="w"> </span>.<span class="w"> </span>.
<span class="k">RUN</span><span class="w"> </span>./configure<span class="w"> </span>--prefix<span class="o">=</span>/opt/app<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>install

<span class="k">FROM</span><span class="w"> </span><span class="s">some-minimal-image</span>
<span class="k">RUN</span><span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>runtime-dependencies
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>builder<span class="w"> </span>/opt/app<span class="w"> </span>/opt/app
</code></pre></div>
<ul>
<li>Use a minimal image in the last stage to reduce the final image size. When using multi-stage builds, the final <code>FROM</code> image should use a minimal image such as from <a href="https://github.com/GoogleContainerTools/distroless/">Distroless</a> or <a href="https://images.chainguard.dev/">Chainguard</a> to minimise image content and size.</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="k">FROM</span><span class="w"> </span><span class="s">some-image</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">builder</span>
<span class="c"># ...</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">gcr.io/distroless/base-debian12</span>
<span class="c"># ...</span>
</code></pre></div>
<ul>
<li>Use a linter such as <a href="https://github.com/hadolint/hadolint">Hadolint</a> to verify the content of the <code>Dockerfile</code>.
 Automated code linting tools can be very useful in detecting common mistakes and pitfalls when developing software. Some configuration tweaks may be required however, as shown in the example below.</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>Ignore<span class="w"> </span>DL3008<span class="w"> </span><span class="o">(</span>Pin<span class="w"> </span>versions<span class="w"> </span><span class="k">in</span><span class="w"> </span>apt<span class="w"> </span>get<span class="w"> </span>install<span class="o">)</span>
<span class="go">docker run --pull always --rm -i docker.io/hadolint/hadolint:latest hadolint --ignore DL3008 - &lt; Dockerfile</span>
</code></pre></div>
<p>See the following resources for additional recommendations:</p>
<ul>
<li><a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1008316">https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1008316</a></li>
<li><a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/">https://docs.docker.com/develop/develop-images/dockerfile_best-practices/</a></li>
<li><a href="https://sysdig.com/blog/dockerfile-best-practices/">https://sysdig.com/blog/dockerfile-best-practices/</a></li>
</ul>
<h2 id="step-2-build-test-locally-and-push-to-registry">Step 2. Build, test locally and push to registry</h2>
<h3 id="21-build-and-test-the-container-locally">2.1 Build and test the container locally</h3>
<p>Docker, Podman, Kubernetes, and Apptainer container images can be created from a single Dockerfile, as all of them support the OCI container image format either natively or indirectly.</p>
<p>Containers can be built using the following command:</p>
<div class="highlight"><pre><span></span><code><span class="go">docker build -t &lt;image&gt;:&lt;tag&gt; -f &lt;path-to-Dockerfile&gt;</span>
</code></pre></div>
<p>Run your image locally, so that minor errors can be immediately fixed before proceeding with the next steps:</p>
<div class="highlight"><pre><span></span><code><span class="go">docker run &lt;options&gt; &lt;image&gt;:&lt;tag&gt;</span>
</code></pre></div>
<h3 id="example">Example</h3>
<p>A container with the following Dockerfile:</p>
<div class="highlight"><pre><span></span><code><span class="w">   </span>FROM<span class="w"> </span>python:3.13.3@sha256:a4b2b11a9faf847c52ad07f5e0d4f34da59bad9d8589b8f2c476165d94c6b377

<span class="w">   </span>#<span class="w"> </span>Create<span class="w"> </span>TRE<span class="w"> </span>directories
<span class="w">   </span>RUN<span class="w"> </span>mkdir<span class="w"> </span>/safe_data<span class="w"> </span>/safe_outputs<span class="w"> </span>/scratch

<span class="w">   </span>#<span class="w"> </span>Add<span class="w"> </span>app<span class="w"> </span>files
<span class="w">   </span>COPY<span class="w"> </span>.<span class="w"> </span>/app
<span class="w">   </span>WORKDIR<span class="w"> </span>/app

<span class="w">   </span>#<span class="w"> </span>Install<span class="w"> </span>Python<span class="w"> </span>dependencies
<span class="w">   </span>RUN<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--no-cache-dir<span class="w"> </span>-r<span class="w"> </span>requirements.txt

<span class="w">   </span>#<span class="w"> </span>Default<span class="w"> </span>command
<span class="w">   </span>CMD<span class="w"> </span><span class="o">[</span><span class="s2">&quot;python&quot;</span>,<span class="w"> </span><span class="s2">&quot;app.py&quot;</span><span class="o">]</span>
</code></pre></div>
<p>where this is the app structure:</p>
<div class="highlight"><pre><span></span><code><span class="go">.</span>
<span class="go">├── app.py</span>
<span class="go">├── requirements.txt</span>
<span class="go">└── Dockerfile</span>
</code></pre></div>
<p>can be built with the command:</p>
<div class="highlight"><pre><span></span><code><span class="go">docker build -t myapp:v1.1 . --platform linux/amd64</span>
</code></pre></div>
<p>where <code>--platform linux/amd64</code> is added to ensure image compatibility with the TRE environment in case the image is being built on a different platform.</p>
<p>The container can then be tested with:</p>
<div class="highlight"><pre><span></span><code><span class="go">docker run --rm myapp:v1.1</span>
</code></pre></div>
<p>Podman can be used equivalently to Docker in the commands above.</p>
<h3 id="22-automating-dockerfile-validation">2.2 Automating Dockerfile validation</h3>
<p>During development, we recommend that tools like GitHub or GitLab are used for version control and recording of the image content. Using the <a href="https://pre-commit.com/"><code>pre-commit</code></a> tool, it is possible to configure your local repository so that Hadolint (and similar tools) are run automatically each time <code>git commit</code> is run. This is recommended to ensure linting and auto-formatting tools are always run before code is pushed to GitHub.</p>
<p>To run Hadolint, include the hook in your <code>.pre-commit-config.yaml</code> file:</p>
<div class="highlight"><pre><span></span><code><span class="nt">repos</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/hadolint/hadolint</span>
<span class="w">    </span><span class="nt">rev</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v2.12.0</span>
<span class="w">    </span><span class="nt">hooks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hadolint-docker</span>
</code></pre></div>
<h3 id="23-push-to-ghcr">2.3 Push to GHCR</h3>
<p>To prepare the image before pushing to GHCR, we recommend to save the image with a unique, descriptive tag. While it is useful to define a <code>latest</code> tag, each production image should also be tagged with a label such as the version or build date. For non-local images, the registry and repository should also be included. Images can also be tagged multiple times.</p>
<p><strong>Example</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="go">docker build \</span>
<span class="go">   --tag ghcr.io/my/image:v1.2.3 \</span>
<span class="go">   --tag ghcr.io/my/image:latest \</span>
<span class="go">   ...</span>
</code></pre></div>
<p>The following commands can be used to upload the image to a private GHCR repository.</p>
<div class="highlight"><pre><span></span><code><span class="go">echo &quot;${GHCR_TOKEN}&quot; | docker login ghcr.io -u $GHCR_NAMESPACE --password-stdin</span>
<span class="go">docker build . --tag &quot;ghcr.io/$GHCR_NAMESPACE/$IMAGE:$TAG&quot; --tag &quot;ghcr.io/$GHCR_NAMESPACE/$IMAGE:latest&quot;</span>
<span class="go">docker push &quot;ghcr.io/$GHCR_NAMESPACE/$IMAGE:latest&quot;</span>
<span class="go">docker push &quot;ghcr.io/$GHCR_NAMESPACE/$IMAGE:$TAG&quot;</span>
<span class="go">docker logout</span>
</code></pre></div>
<h3 id="25-optional-build-and-upload-automation-using-github-actions">2.5 Optional - Build and upload automation using GitHub Actions</h3>
<h4 id="building-in-ci">Building in CI</h4>
<p>Below is a sample GHA configuration which runs Hadolint, builds a container named <code>ghcr.io/my/repo</code>, then runs the <a href="https://aquasecurity.github.io/trivy">Trivy</a> container scanning tool. The Trivy <a href="https://www.cisa.gov/sbom">SBOM</a> report is then uploaded as a job artifact.</p>
<p>This assumes:</p>
<ul>
<li>The repo contains a <code>Dockerfile</code> in the top-level directory,</li>
<li>The <code>Dockerfile</code> contains an <code>ARG</code> or <code>ENV</code> variable which defines the version of the packaged software.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># File .github/workflows/main.yaml</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
<span class="nt">on</span><span class="p">:</span>
<span class="w">  </span><span class="nt">push</span><span class="p">:</span>
<span class="nt">defaults</span><span class="p">:</span>
<span class="w">  </span><span class="nt">run</span><span class="p">:</span>
<span class="w">    </span><span class="nt">shell</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bash</span>
<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">build</span><span class="p">:</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-22.04</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">checkout</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run hadolint</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker run --rm -i ghcr.io/hadolint/hadolint hadolint --failure-threshold error - &lt; Dockerfile</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">build image</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">set -euxo pipefail</span>
<span class="w">          </span><span class="no">repository=&quot;ghcr.io/myrepo&quot;</span>
<span class="w">          </span><span class="no">version=&quot;myversion&quot;</span>
<span class="w">          </span><span class="no">image=&quot;${repository}:${version}&quot;</span>
<span class="w">          </span><span class="no">docker build . --tag &quot;${image}&quot;</span>
<span class="w">          </span><span class="no">echo &quot;image=${image}&quot; &gt;&gt; &quot;$GITHUB_ENV&quot;</span>
<span class="w">          </span><span class="no">echo &quot;Built ${image}&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">push image</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">set -euxo pipefail</span>
<span class="w">          </span><span class="no">echo &quot;${{ secrets.GITHUB_TOKEN }}&quot; | docker login ghcr.io -u $ --password-stdin</span>
<span class="w">          </span><span class="no">docker push &quot;${image}&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run trivy</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aquasecurity/trivy-action@master</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">image-ref</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${{</span><span class="nv"> </span><span class="s">env.image</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">          </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;github&#39;</span>
<span class="w">          </span><span class="nt">output</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;dependency-results.sbom.json&#39;</span>
<span class="w">          </span><span class="nt">github-pat</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${{</span><span class="nv"> </span><span class="s">secrets.GITHUB_TOKEN</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">          </span><span class="nt">severity</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;MEDIUM,CRITICAL,HIGH&#39;</span>
<span class="w">          </span><span class="nt">scanners</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;vuln&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">upload trivy report</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/upload-artifact@v4</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;trivy-sbom-report&#39;</span>
<span class="w">          </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;dependency-results.sbom.json&#39;</span>
</code></pre></div>
<p>Note that manually running Hadolint via pre-commit can be skipped if you are using pre-commit and the <a href="https://pre-commit.ci/">pre-commit.ci</a> service.</p>
<h4 id="publishing-in-ci">Publishing in CI</h4>
<p><strong>Note</strong> Images can also be built and pushed from your local environment as normal.</p>
<p>Once the stage has been reached where your software package is ready for distribution, the GHA example above can be extended to automatically publish new image versions to the GHCR. An introduction to GHCR can be found in the GitHub docs <a href="https://docs.github.com/en/packages/quickstart">here</a>.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># After the image has been built and scanned</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">push image</span>
<span class="w">  </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">set -euxo pipefail</span>
<span class="w">    </span><span class="no">echo &quot;${{ secrets.GITHUB_TOKEN }}&quot; | docker login ghcr.io -u $ --password-stdin</span>
<span class="w">    </span><span class="no">docker push &quot;${image}&quot;</span>
</code></pre></div>
<h2 id="step-3-test-in-ces-test-environment">Step 3. Test in CES test environment</h2>
<p>EPCC provides a test environment that allows users to test their containers in a TRE-like environment without having to be logged into the TRE itself. Containers that run successfully in such environment can then be expected to perform in the same way in the TRE.</p>
<h3 id="31-accessing-test-environment">3.1 Accessing test environment</h3>
<p>The test environment is located in the eidf147 project. Please ask your research coordinator to contact EPCC and request for you to be added to the test environment.</p>
<h3 id="32-pull-and-run">3.2 Pull and run</h3>
<div class="admonition warning">
<p class="admonition-title">Do not use container CLIs directly</p>
<p>The CES wrapper scripts <strong>must</strong> be used to run containers in the TRE. This is to ensure that the correct data directories are automatically made available.</p>
<p>You <strong>must not</strong> use commands such as <code>podman run ...</code> or <code>docker run ...</code> directly.</p>
</div>
<p>Containers can only be used on the TRE desktop hosts using shell commands. Containers can only be pulled from the GHCR into the TRE using a <code>ces-pull</code> script. Hence containers must be pushed to GHCR for them to be used in the TRE. Although alternative methods can be used in the test environment, we encourage users to follow the exact same procedure as they would in the TRE.</p>
<p>Once access has been granted to the test environemnt in the eidf147 project, the user can pull a container from their private GHCR repository using the command:</p>
<div class="highlight"><pre><span></span><code>ces-pull<span class="w"> </span>&lt;container-engine&gt;<span class="w"> </span>&lt;github_user&gt;<span class="w"> </span>&lt;github_token&gt;<span class="w"> </span>ghcr.io/&lt;namespace&gt;/&lt;container_name&gt;:&lt;container_tag&gt;
</code></pre></div>
<blockquote>
<p>[!NOTE]
The three container engines available are Podman and Apptainer, with <code>ces-pull</code> defaulting to Podman if no container engine is specified.</p>
</blockquote>
<p>To run the container, use:</p>
<div class="highlight"><pre><span></span><code>ces-run<span class="w"> </span>&lt;container-engine&gt;<span class="w"> </span>ghcr.io/&lt;namespace&gt;/&lt;container_name&gt;<span class="o">[</span>:&lt;container_tag&gt;<span class="o">]</span>
</code></pre></div>
<p>When using Podman and Apptainer, extra arguments can be passed using <code>env-file</code>, <code>opt-file</code> and <code>arg-file</code>. Containers that require a GPU can be run adding the <code>--gpu</code> option. See <code>ces-run --help</code> for all available options:</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>ces-run<span class="w"> </span>--help
<span class="go">WARNING: container runtime is defaulting to podman</span>
<span class="go">Running: /usr/local/bin/ces-pm-run --help</span>
<span class="go">Run a container in the TRE</span>

<span class="go">Usage:</span>
<span class="go">  ces-pm-run [options] &lt;container&gt;</span>

<span class="go">Available Options:</span>
<span class="go">  -c|--cores      CPU cores to allocate (default is sharing all of them)</span>
<span class="go">  --dry-run       Do not run the container, print out all the command options</span>
<span class="go">  --env-file      File with env vars to pass to container</span>
<span class="go">  --gpu           Connect the container to the local GPU</span>
<span class="go">  -h|--help       Print this stuff</span>
<span class="go">  -m|--memory     Memory to allocate in Gb (default is 4Gb)</span>
<span class="go">  -n|--name       Assign a name to the container</span>
<span class="go">  --opt-file      File with additional options to pass to run command</span>
<span class="go">  --arg-file      File with additional arguments to append to run command</span>
<span class="go">  -v|--verbose    Print out all command options</span>
<span class="go">  --version       Print out version string</span>
</code></pre></div>
<p>We recommend to test containers without network connection to best mimick their functionality inside the TRE, where the container will not be able to access the internet. With Podman, for example, this can be achieved by passing the option <code>--network=none</code> through the <code>opt-file</code>.</p>
<p>Once the container runs successfully in the test environment, it is ready to be used inside the TRE.</p>
<h2 id="step-4-pull-and-run-container-inside-the-tre">Step 4. Pull and run container inside the TRE</h2>
<p>To use the containers inside the TRE, log into the desired VM using the steps described in the EIDF User Documentation: <a href="https://docs.eidf.ac.uk/safe-haven-services/safe-haven-access/">https://docs.eidf.ac.uk/safe-haven-services/safe-haven-access/</a></p>
<p>The same steps described in <a href="#32-pull-and-run">Section 3.2</a> of this document can then be used to pull and run the container.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["tabs"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.50899def.min.js"></script>
      
    
  </body>
</html>