
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://epcced.github.io/eidf-docs/services/gpuservice/training/L1_getting_started/">
      
      
        <link rel="prev" href="../../kueue/">
      
      
        <link rel="next" href="../L2_requesting_persistent_volumes/">
      
      
      <link rel="icon" href="../../../../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>Getting Started - EIDF User Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../stylesheets/eidf.css">
    
      <link rel="stylesheet" href="../../../../stylesheets/access.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#getting-started-with-kubernetes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="EIDF User Documentation" class="md-header__button md-logo" aria-label="EIDF User Documentation" data-md-component="logo">
      
  <img src="../../../../images/EIDF_rgb.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EIDF User Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Getting Started
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/EPCCed/eidf-docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    EPCCed/eidf-docs.git
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="EIDF User Documentation" class="md-nav__button md-logo" aria-label="EIDF User Documentation" data-md-component="logo">
      
  <img src="../../../../images/EIDF_rgb.png" alt="logo">

    </a>
    EIDF User Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/EPCCed/eidf-docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    EPCCed/eidf-docs.git
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../status/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Service Status
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentation overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    About EIDF
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            About EIDF
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../overview/acknowledgements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Acknowledgements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../overview/contacts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contact
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Service Access
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Service Access
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../access/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web and SSH
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../access/project/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EIDF Web Portal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../access/virtualmachines-vdi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtual Desktop Interface
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Computing Services
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Computing Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Virtual Desktops
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            Virtual Desktops
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../virtualmachines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../virtualmachines/quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    QuickStart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../virtualmachines/docs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Managing VMs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../access/virtualmachines-vdi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtual Desktop Interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../access/ssh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SSH Access to VMs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../virtualmachines/flavours/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VM Flavours
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../virtualmachines/policies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Policies
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Managed JupyterHub
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Managed JupyterHub
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../jhub/quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    QuickStart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../jhub/tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../jhub/docs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cerebras CS-2
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Cerebras CS-2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cs2/access/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get Access
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cs2/run/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running codes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Ultra2
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            Ultra2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ultra2/access/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get Access
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ultra2/run/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running codes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    GPU Service
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            GPU Service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../policies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Policies
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kueue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kueue
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5_4" checked>
        
          
          <label class="md-nav__link" for="__nav_5_5_4" id="__nav_5_5_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_5_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_5_4">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interacting-with-a-k8s-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Interacting with a K8s cluster
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-your-first-job" class="md-nav__link">
    <span class="md-ellipsis">
      Creating your first job
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#specifying-gpu-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Specifying GPU requirements
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Specifying GPU requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-yaml-file" class="md-nav__link">
    <span class="md-ellipsis">
      Example yaml file
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-multiple-pods-with-k8s-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      Running multiple pods with K8s jobs
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../L2_requesting_persistent_volumes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Persistent Volumes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../L3_running_a_pytorch_task/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running a Pytorch Pod
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../L4_template_workflow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Template K8s Workflow
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GPU Service FAQ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Graphcore Bow Pod64
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            Graphcore Bow Pod64
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../graphcore/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6_2" >
        
          
          <label class="md-nav__link" for="__nav_5_6_2" id="__nav_5_6_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6_2">
            <span class="md-nav__icon md-icon"></span>
            Tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../graphcore/training/L1_getting_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../graphcore/training/L2_multiple_IPU/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multi-IPU Jobs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../graphcore/training/L3_profiling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Profiling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../graphcore/training/L4_other_frameworks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Other Frameworks
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../graphcore/faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Graphcore FAQ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Data Management Services
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Data Management Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" >
        
          
          <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Data Catalogue
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            Data Catalogue
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../datacatalogue/metadata/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Metadata information
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Safe Haven Services
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Safe Haven Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../safe-haven-services/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../safe-haven-services/network-access-controls/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Network Access Controls
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../safe-haven-services/safe-haven-access/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Safe Haven Access
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../safe-haven-services/virtual-desktop-connections/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtual Desktop Connections
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../safe-haven-services/using-the-hpc-cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using the HPC Cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_6" >
        
          
          <label class="md-nav__link" for="__nav_7_6" id="__nav_7_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Superdome Flex Tutorial
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_6">
            <span class="md-nav__icon md-icon"></span>
            Superdome Flex Tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../safe-haven-services/superdome-flex-tutorial/L1_Accessing_the_SDF_Inside_the_EPCC_TRE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accessing the SDF Inside the EPCC TRE
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../safe-haven-services/superdome-flex-tutorial/L2_running_R_Python_analysis_scripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running R/Python Scripts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../safe-haven-services/superdome-flex-tutorial/L3_submitting_scripts_to_slurm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Submitting Scripts to Slurm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../safe-haven-services/superdome-flex-tutorial/L4_parallelised_python_analysis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Parallelised Python Analysis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../safe-haven-services/superdome-flex-tutorial/L5_parallelised_r_analysis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Parallelised R Analysis
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Bespoke Services
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Bespoke Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_1" >
        
          
          <label class="md-nav__link" for="__nav_8_1" id="__nav_8_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Ed-DaSH
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_1">
            <span class="md-nav__icon md-icon"></span>
            Ed-DaSH
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../bespoke/eddash/workshops/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Workshop Notebook Service
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../bespoke/eddash/safe-registration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Workshop Virtual Machines
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../bespoke/eddash/jhub-git/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JupyterHub Notebook Service Access
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../known-issues/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EIDF Known Issues
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EIDF Frequently Asked Questions
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interacting-with-a-k8s-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Interacting with a K8s cluster
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-your-first-job" class="md-nav__link">
    <span class="md-ellipsis">
      Creating your first job
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#specifying-gpu-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Specifying GPU requirements
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Specifying GPU requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-yaml-file" class="md-nav__link">
    <span class="md-ellipsis">
      Example yaml file
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-multiple-pods-with-k8s-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      Running multiple pods with K8s jobs
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="getting-started-with-kubernetes">Getting started with Kubernetes</h1>
<h2 id="introduction">Introduction</h2>
<p>Kubernetes (K8s) is a container orchestration system, originally developed by Google, for the deployment, scaling, and management of containerised applications.</p>
<p>Nvidia GPUs are supported through K8s native Nvidia GPU Operators.</p>
<p>The use of K8s to manage the EIDF GPU Service provides two key advantages:</p>
<ul>
<li>support for containers enabling reproducible analysis whilst minimising demand on system admin.</li>
<li>automated resource allocation management for GPUs and storage volumes that are shared across multiple users.</li>
</ul>
<h2 id="interacting-with-a-k8s-cluster">Interacting with a K8s cluster</h2>
<p>An overview of the key components of a K8s container can be seen on the <a href="https://kubernetes.io/docs/concepts/overview/components/">Kubernetes docs website</a>.</p>
<p>The primary component of a K8s cluster is a pod.</p>
<p>A pod is a set of one or more containers (and their storage volumes) that share resources.</p>
<p>Users define the resource requirements of a pod (i.e. number/type of GPU) and the containers to be ran in the pod by writing a yaml file.</p>
<p>The pod definition yaml file is sent to the cluster using the K8s API and is assigned to an appropriate node to be ran.</p>
<p>A node is a part of the cluster such as a physical or virtual host which exposes CPU, Memory and GPUs.</p>
<p>Multiple pods can be defined and maintained using several different methods depending on purpose: <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/">deployments</a>, <a href="https://kubernetes.io/docs/concepts/services-networking/service/">services</a> and <a href="https://kubernetes.io/docs/concepts/workloads/controllers/job/">jobs</a>; see the K8s docs for more details.</p>
<p>Users interact with the K8s API using the <code>kubectl</code> (short for kubernetes control) commands.</p>
<p>Some of the kubectl commands are restricted on the EIDF cluster in order to ensure project details are not shared across namespaces.</p>
<p>Useful commands are:</p>
<ul>
<li><code>kubectl create -f &lt;job definition yaml&gt;</code>: Create a new job with requested resources. Returns an error if a job with the same name already exists.</li>
<li><code>kubectl apply -f &lt;job definition yaml&gt;</code>: Create a new job with requested resources. If a job with the same name already exists it updates that job with the new resource/container requirements outlined in the yaml.</li>
<li><code>kubectl delete pod &lt;pod name&gt;</code>: Delete a pod from the cluster.</li>
<li><code>kubectl get pods</code>: Summarise all pods the namespace has active (or pending).</li>
<li><code>kubectl describe pods</code>: Verbose description of all pods the namespace has active (or pending).</li>
<li><code>kubectl describe pod &lt;pod name&gt;</code>: Verbose summary of the specified pod.</li>
<li><code>kubectl logs &lt;pod name&gt;</code>: Retrieve the log files associated with a running pod.</li>
<li><code>kubectl get jobs</code>:  List all jobs the namespace has active (or pending).</li>
<li><code>kubectl describe job &lt;job name&gt;</code>: Verbose summary of the specified job.</li>
<li><code>kubectl delete job &lt;job name&gt;</code>: Delete a job from the cluster.</li>
</ul>
<h2 id="creating-your-first-job">Creating your first job</h2>
<p>To access the GPUs on the service, it is recommended to start with one of the prebuild container images provided by Nvidia, these images are intended to perform different tasks using Nvidia GPUs.</p>
<p>The list of Nvidia images is available on their <a href="https://catalog.ngc.nvidia.com/orgs/nvidia/teams/k8s/containers/cuda-sample/tags">website</a>.</p>
<p>The following example uses their CUDA sample code simulating nbody interactions.</p>
<ol>
<li>Open an editor of your choice and create the file test_NBody.yml</li>
<li>
<p>Copy the following in to the file, replacing <code>namespace-user-queue</code> with <your namespace>-user-queue, e.g. eidf001ns-user-queue:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">batch/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Job</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">    </span><span class="nt">generateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jobtest-</span>
<span class="w">    </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">kueue.x-k8s.io/queue-name</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">namespace-user-queue</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">    </span><span class="nt">completions</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">template</span><span class="p">:</span>
<span class="w">        </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">            </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">job-test</span>
<span class="w">        </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">            </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cudasample</span>
<span class="w">              </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvcr.io/nvidia/k8s/cuda-sample:nbody-cuda11.7.1</span>
<span class="w">              </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;-benchmark&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-numbodies=512000&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-fp64&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-fullscreen&quot;</span><span class="p p-Indicator">]</span>
<span class="w">              </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">                    </span><span class="nt">requests</span><span class="p">:</span>
<span class="w">                        </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">                        </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1Gi&#39;</span>
<span class="w">                    </span><span class="nt">limits</span><span class="p">:</span>
<span class="w">                        </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">                        </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;4Gi&#39;</span>
<span class="w">                        </span><span class="nt">nvidia.com/gpu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">            </span><span class="nt">restartPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Never</span>
</code></pre></div>
<p>The pod resources are defined under the <code>resources</code> tags using the <code>requests</code> and <code>limits</code> tags.</p>
<p>Resources defined under the <code>requests</code> tags are the reserved resources required for the pod to be scheduled.</p>
<p>If a pod is assigned to a node with unused resources then it may burst up to use resources beyond those requested.</p>
<p>This may allow the task within the pod to run faster, but it will also throttle back down when further pods are scheduled to the node.</p>
<p>The <code>limits</code> tag specifies the maximum resources that can be assigned to a pod.</p>
<p>The EIDF GPU Service requires all pods have <code>requests</code> and <code>limits</code> tags for CPU and memory defined in order to be accepted.</p>
<p>GPU resources requests are optional and only an entry under the <code>limits</code> tag is needed to specify the use of a GPU, <code>nvidia.com/gpu: 1</code>. Without this no GPU will be available to the pod.</p>
<p>The label <code>kueue.x-k8s.io/queue-name</code> specifies the queue you are submitting your job to. This is part of the Kueue system in operation on the service to allow for improved resource management for users.</p>
</li>
<li>
<p>Save the file and exit the editor</p>
</li>
<li>Run <code>kubectl create -f test_NBody.yml</code></li>
<li>
<p>This will output something like:</p>
<div class="highlight"><pre><span></span><code>job.batch/jobtest-b92qg<span class="w"> </span>created
</code></pre></div>
</li>
<li>
<p>Run <code>kubectl get jobs</code></p>
</li>
<li>
<p>This will output something like:</p>
<div class="highlight"><pre><span></span><code>NAME<span class="w">            </span>COMPLETIONS<span class="w">   </span>DURATION<span class="w">   </span>AGE
jobtest-b92qg<span class="w">   </span><span class="m">3</span>/3<span class="w">           </span>48s<span class="w">        </span>6m27s
jobtest-d45sr<span class="w">   </span><span class="m">5</span>/5<span class="w">           </span>15m<span class="w">        </span>22h
jobtest-kwmwk<span class="w">   </span><span class="m">3</span>/3<span class="w">           </span>48s<span class="w">        </span>29m
jobtest-kw22k<span class="w">   </span><span class="m">1</span>/1<span class="w">           </span>48s<span class="w">        </span>29m
</code></pre></div>
<p>This displays all the jobs in the current namespace, starting with their name, number of completions against required completions, duration and age.</p>
</li>
<li>
<p>Describe your job using the command <code>kubectl describe job jobtest-b92-qg</code>, replacing the job name with your job name.</p>
</li>
<li>
<p>This will output something like:</p>
<div class="highlight"><pre><span></span><code>Name:<span class="w">             </span>jobtest-b92qg
Namespace:<span class="w">        </span>t4
Selector:<span class="w">         </span>controller-uid<span class="o">=</span>d3233fee-794e-466f-9655-1fe32d1f06d3
Labels:<span class="w">           </span>kueue.x-k8s.io/queue-name<span class="o">=</span>t4-user-queue
Annotations:<span class="w">      </span>batch.kubernetes.io/job-tracking:
Parallelism:<span class="w">      </span><span class="m">1</span>
Completions:<span class="w">      </span><span class="m">3</span>
Completion<span class="w"> </span>Mode:<span class="w">  </span>NonIndexed
Start<span class="w"> </span>Time:<span class="w">       </span>Wed,<span class="w"> </span><span class="m">14</span><span class="w"> </span>Feb<span class="w"> </span><span class="m">2024</span><span class="w"> </span><span class="m">14</span>:07:44<span class="w"> </span>+0000
Completed<span class="w"> </span>At:<span class="w">     </span>Wed,<span class="w"> </span><span class="m">14</span><span class="w"> </span>Feb<span class="w"> </span><span class="m">2024</span><span class="w"> </span><span class="m">14</span>:08:32<span class="w"> </span>+0000
Duration:<span class="w">         </span>48s
Pods<span class="w"> </span>Statuses:<span class="w">    </span><span class="m">0</span><span class="w"> </span>Active<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="w"> </span>Ready<span class="o">)</span><span class="w"> </span>/<span class="w"> </span><span class="m">3</span><span class="w"> </span>Succeeded<span class="w"> </span>/<span class="w"> </span><span class="m">0</span><span class="w"> </span>Failed
Pod<span class="w"> </span>Template:
<span class="w">    </span>Labels:<span class="w">  </span>controller-uid<span class="o">=</span>d3233fee-794e-466f-9655-1fe32d1f06d3
<span class="w">            </span>job-name<span class="o">=</span>jobtest-b92qg
<span class="w">    </span>Containers:
<span class="w">        </span>cudasample:
<span class="w">            </span>Image:<span class="w">      </span>nvcr.io/nvidia/k8s/cuda-sample:nbody-cuda11.7.1
<span class="w">            </span>Port:<span class="w">       </span>&lt;none&gt;
<span class="w">            </span>Host<span class="w"> </span>Port:<span class="w">  </span>&lt;none&gt;
<span class="w">            </span>Args:
<span class="w">                </span>-benchmark
<span class="w">                </span>-numbodies<span class="o">=</span><span class="m">512000</span>
<span class="w">                </span>-fp64
<span class="w">                </span>-fullscreen
<span class="w">            </span>Limits:
<span class="w">                </span>cpu:<span class="w">             </span><span class="m">2</span>
<span class="w">                </span>memory:<span class="w">          </span>4Gi
<span class="w">                </span>nvidia.com/gpu:<span class="w">  </span><span class="m">1</span>
<span class="w">            </span>Requests:
<span class="w">                </span>cpu:<span class="w">        </span><span class="m">2</span>
<span class="w">                </span>memory:<span class="w">     </span>1Gi
<span class="w">            </span>Environment:<span class="w">  </span>&lt;none&gt;
<span class="w">            </span>Mounts:<span class="w">       </span>&lt;none&gt;
<span class="w">    </span>Volumes:<span class="w">        </span>&lt;none&gt;
Events:
Type<span class="w">    </span>Reason<span class="w">            </span>Age<span class="w">    </span>From<span class="w">                        </span>Message
----<span class="w">    </span>------<span class="w">            </span>----<span class="w">   </span>----<span class="w">                        </span>-------
Normal<span class="w">  </span>Suspended<span class="w">         </span>8m1s<span class="w">   </span>job-controller<span class="w">              </span>Job<span class="w"> </span>suspended
Normal<span class="w">  </span>CreatedWorkload<span class="w">   </span>8m1s<span class="w">   </span>batch/job-kueue-controller<span class="w">  </span>Created<span class="w"> </span>Workload:<span class="w"> </span>t4/job-jobtest-b92qg-3b890
Normal<span class="w">  </span>Started<span class="w">           </span>8m1s<span class="w">   </span>batch/job-kueue-controller<span class="w">  </span>Admitted<span class="w"> </span>by<span class="w"> </span>clusterQueue<span class="w"> </span>project-cq
Normal<span class="w">  </span>SuccessfulCreate<span class="w">  </span>8m<span class="w">     </span>job-controller<span class="w">              </span>Created<span class="w"> </span>pod:<span class="w"> </span>jobtest-b92qg-lh64s
Normal<span class="w">  </span>Resumed<span class="w">           </span>8m<span class="w">     </span>job-controller<span class="w">              </span>Job<span class="w"> </span>resumed
Normal<span class="w">  </span>SuccessfulCreate<span class="w">  </span>7m44s<span class="w">  </span>job-controller<span class="w">              </span>Created<span class="w"> </span>pod:<span class="w"> </span>jobtest-b92qg-xhvdm
Normal<span class="w">  </span>SuccessfulCreate<span class="w">  </span>7m28s<span class="w">  </span>job-controller<span class="w">              </span>Created<span class="w"> </span>pod:<span class="w"> </span>jobtest-b92qg-lvmrf
Normal<span class="w">  </span>Completed<span class="w">         </span>7m12s<span class="w">  </span>job-controller<span class="w">              </span>Job<span class="w"> </span>completed
</code></pre></div>
</li>
<li>
<p>Run <code>kubectl get pods</code></p>
</li>
<li>
<p>This will output something like:</p>
<div class="highlight"><pre><span></span><code>NAME<span class="w">                  </span>READY<span class="w">   </span>STATUS<span class="w">      </span>RESTARTS<span class="w">   </span>AGE
jobtest-b92qg-lh64s<span class="w">   </span><span class="m">0</span>/1<span class="w">     </span>Completed<span class="w">   </span><span class="m">0</span><span class="w">          </span>11m
jobtest-b92qg-lvmrf<span class="w">   </span><span class="m">0</span>/1<span class="w">     </span>Completed<span class="w">   </span><span class="m">0</span><span class="w">          </span>10m
jobtest-b92qg-xhvdm<span class="w">   </span><span class="m">0</span>/1<span class="w">     </span>Completed<span class="w">   </span><span class="m">0</span><span class="w">          </span>10m
jobtest-d45sr-8tf4d<span class="w">   </span><span class="m">0</span>/1<span class="w">     </span>Completed<span class="w">   </span><span class="m">0</span><span class="w">          </span>22h
jobtest-d45sr-jjhgg<span class="w">   </span><span class="m">0</span>/1<span class="w">     </span>Completed<span class="w">   </span><span class="m">0</span><span class="w">          </span>22h
jobtest-d45sr-n5w6c<span class="w">   </span><span class="m">0</span>/1<span class="w">     </span>Completed<span class="w">   </span><span class="m">0</span><span class="w">          </span>22h
jobtest-d45sr-v9p4j<span class="w">   </span><span class="m">0</span>/1<span class="w">     </span>Completed<span class="w">   </span><span class="m">0</span><span class="w">          </span>22h
jobtest-d45sr-xgq5s<span class="w">   </span><span class="m">0</span>/1<span class="w">     </span>Completed<span class="w">   </span><span class="m">0</span><span class="w">          </span>22h
jobtest-kwmwk-cgwmf<span class="w">   </span><span class="m">0</span>/1<span class="w">     </span>Completed<span class="w">   </span><span class="m">0</span><span class="w">          </span>33m
jobtest-kwmwk-mttdw<span class="w">   </span><span class="m">0</span>/1<span class="w">     </span>Completed<span class="w">   </span><span class="m">0</span><span class="w">          </span>33m
jobtest-kwmwk-r2q9h<span class="w">   </span><span class="m">0</span>/1<span class="w">     </span>Completed<span class="w">   </span><span class="m">0</span><span class="w">          </span>33m
</code></pre></div>
</li>
<li>
<p>View the logs of a pod from the job you ran <code>kubectl logs jobtest-b92qg-lh64s</code> - note that the pods for the job in this case start with the job name.</p>
</li>
<li>
<p>This will output something like:</p>
<div class="highlight"><pre><span></span><code>Run<span class="w"> </span><span class="s2">&quot;nbody -benchmark [-numbodies=&lt;numBodies&gt;]&quot;</span><span class="w"> </span>to<span class="w"> </span>measure<span class="w"> </span>performance.
<span class="w">    </span>-fullscreen<span class="w">       </span><span class="o">(</span>run<span class="w"> </span>n-body<span class="w"> </span>simulation<span class="w"> </span><span class="k">in</span><span class="w"> </span>fullscreen<span class="w"> </span>mode<span class="o">)</span>
<span class="w">    </span>-fp64<span class="w">             </span><span class="o">(</span>use<span class="w"> </span>double<span class="w"> </span>precision<span class="w"> </span>floating<span class="w"> </span>point<span class="w"> </span>values<span class="w"> </span><span class="k">for</span><span class="w"> </span>simulation<span class="o">)</span>
<span class="w">    </span>-hostmem<span class="w">          </span><span class="o">(</span>stores<span class="w"> </span>simulation<span class="w"> </span>data<span class="w"> </span><span class="k">in</span><span class="w"> </span>host<span class="w"> </span>memory<span class="o">)</span>
<span class="w">    </span>-benchmark<span class="w">        </span><span class="o">(</span>run<span class="w"> </span>benchmark<span class="w"> </span>to<span class="w"> </span>measure<span class="w"> </span>performance<span class="o">)</span>
<span class="w">    </span>-numbodies<span class="o">=</span>&lt;N&gt;<span class="w">    </span><span class="o">(</span>number<span class="w"> </span>of<span class="w"> </span>bodies<span class="w"> </span><span class="o">(</span>&gt;<span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span><span class="k">in</span><span class="w"> </span>simulation<span class="o">)</span>
<span class="w">    </span>-device<span class="o">=</span>&lt;d&gt;<span class="w">       </span><span class="o">(</span>where<span class="w"> </span><span class="nv">d</span><span class="o">=</span><span class="m">0</span>,1,2....<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>CUDA<span class="w"> </span>device<span class="w"> </span>to<span class="w"> </span>use<span class="o">)</span>
<span class="w">    </span>-numdevices<span class="o">=</span>&lt;i&gt;<span class="w">   </span><span class="o">(</span>where<span class="w"> </span><span class="nv">i</span><span class="o">=(</span>number<span class="w"> </span>of<span class="w"> </span>CUDA<span class="w"> </span>devices<span class="w"> </span>&gt;<span class="w"> </span><span class="m">0</span><span class="o">)</span><span class="w"> </span>to<span class="w"> </span>use<span class="w"> </span><span class="k">for</span><span class="w"> </span>simulation<span class="o">)</span>
<span class="w">    </span>-compare<span class="w">          </span><span class="o">(</span>compares<span class="w"> </span>simulation<span class="w"> </span>results<span class="w"> </span>running<span class="w"> </span>once<span class="w"> </span>on<span class="w"> </span>the<span class="w"> </span>default<span class="w"> </span>GPU<span class="w"> </span>and<span class="w"> </span>once<span class="w"> </span>on<span class="w"> </span>the<span class="w"> </span>CPU<span class="o">)</span>
<span class="w">    </span>-cpu<span class="w">              </span><span class="o">(</span>run<span class="w"> </span>n-body<span class="w"> </span>simulation<span class="w"> </span>on<span class="w"> </span>the<span class="w"> </span>CPU<span class="o">)</span>
<span class="w">    </span>-tipsy<span class="o">=</span>&lt;file.bin&gt;<span class="w"> </span><span class="o">(</span>load<span class="w"> </span>a<span class="w"> </span>tipsy<span class="w"> </span>model<span class="w"> </span>file<span class="w"> </span><span class="k">for</span><span class="w"> </span>simulation<span class="o">)</span>

NOTE:<span class="w"> </span>The<span class="w"> </span>CUDA<span class="w"> </span>Samples<span class="w"> </span>are<span class="w"> </span>not<span class="w"> </span>meant<span class="w"> </span><span class="k">for</span><span class="w"> </span>performance<span class="w"> </span>measurements.<span class="w"> </span>Results<span class="w"> </span>may<span class="w"> </span>vary<span class="w"> </span>when<span class="w"> </span>GPU<span class="w"> </span>Boost<span class="w"> </span>is<span class="w"> </span>enabled.

&gt;<span class="w"> </span>Fullscreen<span class="w"> </span>mode
&gt;<span class="w"> </span>Simulation<span class="w"> </span>data<span class="w"> </span>stored<span class="w"> </span><span class="k">in</span><span class="w"> </span>video<span class="w"> </span>memory
&gt;<span class="w"> </span>Double<span class="w"> </span>precision<span class="w"> </span>floating<span class="w"> </span>point<span class="w"> </span>simulation
&gt;<span class="w"> </span><span class="m">1</span><span class="w"> </span>Devices<span class="w"> </span>used<span class="w"> </span><span class="k">for</span><span class="w"> </span>simulation
GPU<span class="w"> </span>Device<span class="w"> </span><span class="m">0</span>:<span class="w"> </span><span class="s2">&quot;Ampere&quot;</span><span class="w"> </span>with<span class="w"> </span>compute<span class="w"> </span>capability<span class="w"> </span><span class="m">8</span>.0

&gt;<span class="w"> </span>Compute<span class="w"> </span><span class="m">8</span>.0<span class="w"> </span>CUDA<span class="w"> </span>device:<span class="w"> </span><span class="o">[</span>NVIDIA<span class="w"> </span>A100-SXM4-40GB<span class="o">]</span>
number<span class="w"> </span>of<span class="w"> </span><span class="nv">bodies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">512000</span>
<span class="m">512000</span><span class="w"> </span>bodies,<span class="w"> </span>total<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="m">10</span><span class="w"> </span>iterations:<span class="w"> </span><span class="m">10570</span>.778<span class="w"> </span><span class="nv">ms</span>
<span class="o">=</span><span class="w"> </span><span class="m">247</span>.989<span class="w"> </span>billion<span class="w"> </span>interactions<span class="w"> </span>per<span class="w"> </span><span class="nv">second</span>
<span class="o">=</span><span class="w"> </span><span class="m">7439</span>.679<span class="w"> </span>double-precision<span class="w"> </span>GFLOP/s<span class="w"> </span>at<span class="w"> </span><span class="m">30</span><span class="w"> </span>flops<span class="w"> </span>per<span class="w"> </span>interaction
</code></pre></div>
</li>
<li>
<p>Delete your job with <code>kubectl delete job jobtest-b92qg</code> - this will delete the associated pods as well.</p>
</li>
</ol>
<h2 id="specifying-gpu-requirements">Specifying GPU requirements</h2>
<p>If you create multiple jobs with the same definition file and compare their log files you may notice the CUDA device may differ from <code>Compute 8.0 CUDA device: [NVIDIA A100-SXM4-40GB]</code>.</p>
<p>The GPU Operator on K8s is allocating the pod to the first node with a GPU free that matches the other resource specifications irrespective of whether what GPU type is present on the node.</p>
<p>The GPU resource requests can be made more specific by adding the type of GPU product the pod is requesting to the node selector:</p>
<ul>
<li><code>nvidia.com/gpu.product: 'NVIDIA-A100-SXM4-80GB'</code></li>
<li><code>nvidia.com/gpu.product: 'NVIDIA-A100-SXM4-40GB'</code></li>
<li><code>nvidia.com/gpu.product: 'NVIDIA-A100-SXM4-40GB-MIG-3g.20gb'</code></li>
<li><code>nvidia.com/gpu.product: 'NVIDIA-A100-SXM4-40GB-MIG-1g.5gb'</code></li>
<li><code>nvidia.com/gpu.product: 'NVIDIA-H100-80GB-HBM3'</code></li>
</ul>
<h3 id="example-yaml-file">Example yaml file</h3>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">batch/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Job</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">    </span><span class="nt">generateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jobtest-</span>
<span class="w">    </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">kueue.x-k8s.io/queue-name</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">namespace-user-queue</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">    </span><span class="nt">completions</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">template</span><span class="p">:</span>
<span class="w">        </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">            </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">job-test</span>
<span class="w">        </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">            </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cudasample</span>
<span class="w">              </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvcr.io/nvidia/k8s/cuda-sample:nbody-cuda11.7.1</span>
<span class="w">              </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;-benchmark&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-numbodies=512000&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-fp64&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-fullscreen&quot;</span><span class="p p-Indicator">]</span>
<span class="w">              </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">                    </span><span class="nt">requests</span><span class="p">:</span>
<span class="w">                        </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">                        </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1Gi&#39;</span>
<span class="w">                    </span><span class="nt">limits</span><span class="p">:</span>
<span class="w">                        </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">                        </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;4Gi&#39;</span>
<span class="w">                        </span><span class="nt">nvidia.com/gpu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">            </span><span class="nt">restartPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Never</span>
<span class="w">            </span><span class="nt">nodeSelector</span><span class="p">:</span>
<span class="w">                </span><span class="nt">nvidia.com/gpu.product</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NVIDIA-A100-SXM4-40GB-MIG-1g.5gb</span>
</code></pre></div>
<h2 id="running-multiple-pods-with-k8s-jobs">Running multiple pods with K8s jobs</h2>
<p>The recommended use of the EIDF GPU Service is to use a job request which wraps around a pod specification and provide several useful attributes.</p>
<p>Firstly, if a pod is assigned to a node that dies then the pod itself will fail and the user has to manually restart it.</p>
<p>Wrapping a pod within a job enables the self-healing mechanism within K8s so that if a node dies with the job's pod on it then the job will find a new node to automatically restart the pod, if the restartPolicy is set.</p>
<p>Jobs allow users to define multiple pods that can run in parallel or series and will continue to spawn pods until a specific number of pods successfully terminate.</p>
<p>Jobs allow for better scheduling of resources using the Kueue service implemented on the EIDF GPU Service. Pods which attempt to bypass the queue mechanism this provides will affect the experience of other project users.</p>
<p>See below for an example K8s job that requires three pods to successfully complete the example CUDA code before the job itself ends.</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">batch/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Job</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w"> </span><span class="nt">generateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jobtest-</span>
<span class="w"> </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">kueue.x-k8s.io/queue-name</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">namespace-user-queue</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w"> </span><span class="nt">completions</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w"> </span><span class="nt">parallelism</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w"> </span><span class="nt">template</span><span class="p">:</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">   </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">job-test</span>
<span class="w">  </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">   </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">   </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cudasample</span>
<span class="w">     </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvcr.io/nvidia/k8s/cuda-sample:nbody-cuda11.7.1</span>
<span class="w">     </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;-benchmark&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-numbodies=512000&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-fp64&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-fullscreen&quot;</span><span class="p p-Indicator">]</span>
<span class="w">     </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">      </span><span class="nt">requests</span><span class="p">:</span>
<span class="w">       </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">       </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1Gi&#39;</span>
<span class="w">      </span><span class="nt">limits</span><span class="p">:</span>
<span class="w">       </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">       </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;4Gi&#39;</span>
<span class="w">       </span><span class="nt">nvidia.com/gpu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">   </span><span class="nt">restartPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Never</span>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["tabs"], "search": "../../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
    
  </body>
</html>